<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- Prevent the browser from scaling down the entire page to fit the screen. See https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag. -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Eli's Blog</title>
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/katex.css"> <!-- CSS for the rendered LaTeX. -->

    <script src="/static/js/lodash.min.js"></script>
    <script src="/static/js/jquery-2.2.2.js"></script>
    <script src="/static/js/katex.min.js"></script>
    <script src="/static/js/auto-render.min.js"></script>

    
<link rel="stylesheet" href="/static/css/post.css">

</head>

<body>
    <div class="container">
        <div class="header">
            <div>
                <a class="title" href="/index.html">Eli Rose</a> 's
                <a href="/index.html">posts</a>
                &sdot;
                <a href="/about.html">about</a>
                &sdot;
                <span class="dropdown">
                    <a href="javascript:void(0)">code trinkets</a>
                    <div class="dropdown-content">
                        <div>&sdot; <a href="/game_of_life.html">conway's game of life (in Elm)</a></div>
                        <div>&sdot; <a href="/turing.html">turing</a></div>
                        <div>&sdot; <a href="/sierpinski_fermat.html">sierpinksi's triangle and fermat numbers</a></div>
                        <div>&sdot; <a href="/fraction_pattern.html">fraction pattern</a></div>
                        <div>&sdot; <a href="/markov_text.html">literature scrambler</a></div>
                    </div>
                </span>
                &sdot;
                <a href="/quotes.html">quotes</a>
                &sdot;
                <a href="/media_log.html">media log</a>
            </div>

            <a href="/rss.xml">
                <img class="rss-icon" src="/static/images/feed-icon-28x28.png">
            </a>
        </div>

        <div id="content" class="content">
            
<div class="post-header">
    <div class="post-title">Numpy Indexing</div>
    <div class="post-date">Friday, January 10th, 2020</div>
</div>
<div>
    <p><em>[Epistemic status: quite confident, statements about a formal system, but not complete documentation.]</em></p>
<p>I'm learning Numpy. The various ways to index arrays confused me, and the <a href="https://docs.scipy.org/doc/numpy-1.15.0/reference/arrays.indexing.html">docs</a> I found inscrutable. These are my notes I wrote to myself as I was figuring it out. <strong>Note: This is just what I've needed so far; I'm sure I'm missing other features or edge cases.</strong></p>
<p>Say you're given an indexing expression like <code>X[:, [1], 1:10]</code>. What is the shape of the result going to be? Reading from left to right, you can construct it iteratively, based on the shape of the array <code>X</code> you're indexing into and the type of each thing you encounter between the commas.</p>
<p>Let's define an array to use in examples:</p>
<pre>
>>> A = np.array([[1, 2, 3], [2, 4, 6]])
>>> A.ndim
2
>>> A.shape
(2, 3)
</pre>

<p>Here's what each type of thing you can index by means. I'll focus mostly on how to construct the <em>shape</em> of the result, since I am aiming for simplicity and ease of remembering, and my confusions are more often about the shape than about the result itself.</p>
<h3><code>:</code></h3>
<p><pre>
(..., k, ...)[..., :, ...] -&gt; (..., k, ...)
</pre>
Each <code>:</code> you encounter means "the shape of the result will have an entry here, and the entry is equal to the shape of A in this slot".</p>
<ul>
<li>Example: <code>A[:, :] == A</code>, shape <code>(2, 3) -&gt; (2, 3)</code></li>
<li>Example: <code>A[:] == A</code> as well, because if not enough indices are specified, the rest fills in with "<code>:</code>"</li>
</ul>
<h3><code>a:b</code></h3>
<p><pre>
(..., k, ...)[..., a:b, ...] -&gt; (..., b - a, ...)
</pre>
Each <code>a:b</code> you encounter means "the shape of the result will have an entry here, and the entry is equal to b - a".</p>
<ul>
<li>This is true as long as there aren't actually more elements than you're slicing.</li>
<li>Example: <code>A[:, 0:1] == [[1], [2]]</code>, shape <code>(2, 3) -&gt; (2, 1)</code></li>
</ul>
<h3><code>a</code></h3>
<p><pre>
(..., k, ...)[..., a, ...] -&gt; (..., ...)
</pre>
Each integer you encounter means "the shape of the result will not have an entry here".</p>
<ul>
<li>Example: <code>A[:, 0] == [1, 2]</code>, shape <code>(2, 3) -&gt; (2,)</code></li>
<li>Example: <code>A[0, 1] == 2</code>, shape <code>(2, 3) -&gt; (,)</code></li>
</ul>
<h3><code>[a]</code></h3>
<p><pre>
(..., k, ...)[..., [a], ...] -&gt; (..., *[a].shape, ...)
</pre>
Each numpy array or Python list you encounter means "the shape of the result will, have the shape of this numpy array or Python list inserted here."</p>
<ul>
<li>Example: <code>A[[0], :] == [[1], [2]]</code>, shape <code>(2, 3) -&gt; (1, 3)</code></li>
<li>Example: <code>A[[[0]], :].shape</code> == <code>(1, 1, 3)</code></li>
<li>Example: <code>A[[[0], [1]], :].shape</code> == <code>(2, 1, 3)</code></li>
</ul>
<p>If you want further info, I did find the <a href="https://scipy-cookbook.readthedocs.io/items/Indexing.html">scipy-cookbook</a> docs approachable.</p>
</div>
<div class="post-tags">
    
        <b>Tags:</b>
        <span>programming</span>
        
    
</div>

        </div>
    </div>

    <!-- Automatically render the LaTeX that appears in the page. -->
    <script>
        renderMathInElement(
            document.getElementById("content"), {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            }
        )
    </script>

</body>
</html>