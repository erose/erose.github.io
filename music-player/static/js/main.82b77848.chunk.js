(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],{12:function(e,t,n){e.exports=n.p+"static/media/spinner.2f27f045.ico"},14:function(e,t,n){e.exports=n(25)},19:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(9),s=n.n(r),o=(n(19),n(7)),c=n.n(o),l=n(13),u=n(1),h=n(2),d=n(4),m=n(3),p=n(5),y=n(10),f=n(6),v=n.n(f),g=n(11),b=n.n(g),P=(n(23),n(24),n(12)),S=n.n(P),k=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={loadingStatus:e.isPlaying?"loading":null},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return this.props.isPlaying?"loading"===this.state.loadingStatus?i.a.createElement("div",{className:"Audio"},i.a.createElement("div",{className:"loading-spinner-container",role:"button"},i.a.createElement("img",{role:"img",src:S.a,className:"spinner",alt:"","aria-label":"Play"}),i.a.createElement("audio",{autoPlay:!0,onCanPlay:function(){return e.onLoadingFinished()}},i.a.createElement("source",{src:this.props.url})))):"loaded"===this.state.loadingStatus?i.a.createElement("div",{className:"Audio"},i.a.createElement("div",{className:"play-pause-symbol-container",role:"button",onClick:function(){return e.onPausePressed()}},i.a.createElement("span",{role:"img",className:"pause-symbol","aria-label":"Pause"},"\u23f8\ufe0f"),i.a.createElement("audio",{autoPlay:!0,onEnded:function(){return e.props.onEnded()}},i.a.createElement("source",{src:this.props.url})))):void 0:i.a.createElement("div",{className:"Audio"},i.a.createElement("div",{className:"play-pause-symbol-container",role:"button",onClick:function(){return e.onPlayPressed()}},i.a.createElement("span",{role:"img",className:"play-symbol","aria-label":"Play"},"\u25b6\ufe0f")))}},{key:"onPlayPressed",value:function(){this.props.onPlayPressed()}},{key:"onLoadingFinished",value:function(){this.setState({loadingStatus:"loaded"})}},{key:"onPausePressed",value:function(){this.props.onPausePressed()}}]),t}(i.a.Component),E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).handleOnPopState=function(e){var t="";e.state&&(t=e.state.searchString),n.setState({searchString:t}),n.doSearch(t)},n.renderFile=function(e){var t=n.state.currentlyPlaying.includes(e),a="".concat(e,"-").concat(t);return i.a.createElement("div",{className:"file-container",key:e},i.a.createElement(k,{url:n.props.s3Url+e,isPlaying:t,key:a,onPlayPressed:function(){return n.startPlaying(e)},onPausePressed:function(){return n.stopPlaying(e)},onEnded:function(){return n.onEnded(e)}}),i.a.createElement("span",{className:t?"filename playing":"filename"},e))},n.state={visibleFiles:null===e.filenames?null:[],searchString:e.searchString||"",currentlyPlaying:[]},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handleOnPopState)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handleOnPopState),this.currentTimeoutId&&clearTimeout(this.currentTimeoutId)}},{key:"componentDidUpdate",value:function(e,t,n){b.a.isEqual(this.props.filenames,e.filenames)||this.doSearch(this.state.searchString)}},{key:"render",value:function(){var e=this,t=this.state.visibleFiles,n=i.a.createElement("span",null,"Loading...");return i.a.createElement("div",{className:"SongList"},i.a.createElement("input",{placeholder:"Search...",autoFocus:!0,value:this.state.searchString,role:"searchbox",onChange:function(t){return e.onSearchTermChanged(t.target.value)}}),i.a.createElement("div",{style:{marginTop:"1rem"}},t&&t.map(this.renderFile)||n))}},{key:"onSearchTermChanged",value:function(e){var t=this;this.setState({searchString:e}),this.currentTimeoutId&&clearTimeout(this.currentTimeoutId);this.currentTimeoutId=setTimeout((function(){t.doSearch(e),t.saveSearchString(e)}),750)}},{key:"doSearch",value:function(e){var t=e.toLowerCase();if(""!==t){var n=this.props.filenames.filter((function(e){return e.toLowerCase().includes(t)}));this.setState({visibleFiles:n})}else this.setState({visibleFiles:[]})}},{key:"saveSearchString",value:function(e){var t=new URLSearchParams(window.location.search);t.set("search",e),window.history.pushState({searchString:e},"",window.location.origin+window.location.pathname+"?"+t.toString())}},{key:"onEnded",value:function(e){var t=this.state.visibleFiles.indexOf(e)+1,n=this.state.currentlyPlaying;if(n=n.filter((function(t){return t!==e})),t<this.state.visibleFiles.length){var a=this.state.visibleFiles[t];n.push(a)}this.setState({currentlyPlaying:n})}},{key:"startPlaying",value:function(e){this.setState({currentlyPlaying:this.state.currentlyPlaying.concat(e)})}},{key:"stopPlaying",value:function(e){this.setState({currentlyPlaying:this.state.currentlyPlaying.filter((function(t){return t!==e}))})}}]),t}(i.a.Component),w="https://elis-music.s3.us-east-2.amazonaws.com/";function O(){return(O=Object(y.a)(c.a.mark((function e(){var t,n,a,i,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=null;case 2:return a="list-type=2",n&&(a+="&continuation-token=".concat(encodeURIComponent(n))),e.next=7,fetch(w+"?"+a);case 7:return i=e.sent,e.next=10,i.text();case 10:if(r=e.sent,s=v()(r).find("Contents > Key").toArray().map((function(e){return e.textContent})),t.push.apply(t,Object(l.a)(s)),"true"===v()(r).find("IsTruncated").text()){e.next=15;break}return e.abrupt("break",18);case 15:n=v()(r).find("NextContinuationToken").text(),e.next=2;break;case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={keys:null},n}return Object(p.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(){return O.apply(this,arguments)})().then((function(t){return e.setState({keys:t})}))}},{key:"render",value:function(){var e=new URLSearchParams(window.location.search).get("search");return i.a.createElement(E,{filenames:this.state.keys,s3Url:w,searchString:e})}}]),t}(i.a.Component);s.a.render(i.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.82b77848.chunk.js.map